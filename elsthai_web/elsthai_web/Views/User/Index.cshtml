
<html>
<head>
    <style>
        * {
            font-family: 'Bai Jamjuree', sans-serif;
        }

        #tbresult td, #tbresult th {
            border: 1px solid #ddd;
            padding: 8px;
        }

        #tbresult tr:nth-child(even) {
            background-color: #f2f2f2;
        }

        #tbresult tr:hover {
            background-color: #ddd;
        }

        #tbresult th {
            width: 90px;
            padding-top: 8px;
            padding-bottom: 8px;
            text-align: center;
            background-color: #78e08f;
            color: black;
        }
        h3 {
            margin: 20px;
        }
    </style>
</head>
<body text="black">
    <div class="container">
        <h3 align="center">ข้อมูลผู้ใช้งาน</h3>
        <p>
            @Html.ActionLink("Create New", "Create")
        </p>

        <table class="" id="tbresult" width="90%" align="center">
            <tr>
                <th>ชื่อ-นามสกุล</th>
                <th>อีเมล</th>
                <th>เบอร์โทรศัพท์</th>
                <th>จัดการ</th>
            </tr>

        </table>
    </div>
    <script src="https://www.gstatic.com/firebasejs/8.2.6/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.6/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.6/firebase-firestore.js"></script>
    <script>
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
            apiKey: "AIzaSyDAmC5P4Yz1AA1fsZs_vkFmOvkkRoU2u7Y",
            authDomain: "kcs-database.firebaseapp.com",
            databaseURL: "https://kcs-database.firebaseio.com",
            projectId: "kcs-database",
            storageBucket: "kcs-database.appspot.com",
            messagingSenderId: "942140079361",
            appId: "1:942140079361:web:d06709c7bafe9440c2ef00",
            measurementId: "G-63XXEQFVS1"
        };


        firebase.initializeApp(firebaseConfig);
        let firestore = firebase.firestore()

        ////
        firebase.firestore().collection("userProfile").get().then((snapshot) => {
            snapshot.forEach(doc => {
                console.log(doc.data());
                showData(doc);
            })
        });

        const table = document.querySelector('#tbresult');

        ///
        function showData(doc) {
            console.log(doc.data());
            var row = table.insertRow(-1);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);

            cell1.innerHTML = doc.data().name;
            cell2.innerHTML = doc.data().email;
            cell3.innerHTML = doc.data().phone;
            cell4.innerHTML = "<a href='/user/edit?email=" + doc.data().email + "&name=" + doc.data().name + "&phone=" + doc.data().phone + "&pass=" + doc.data().pass + "'>แก้ไข</a></a> <a  href='/user/delete?email=" + doc.data().email + "&name=" + doc.data().name + "&phone=" + doc.data().phone + "&pass=" + doc.data().pass +"'>ลบ</a>";
        }
        
        document.getElementById('BtnCreate').onclick = function () {
            Create();
        }
        
    </script>
</body>
</html>